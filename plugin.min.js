/**
 * SCAYT
 * plugin.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
!function(){tinymce.DOM,tinymce.util,tinymce.UndoManager;tinymce.PluginManager.requireLangPack("scayt"),tinymce.createNS("tinymce.plugins.SCAYT"),tinymce.plugins.SCAYT=function(){var a={},b={},c=[],d={loadOrder:[]},e=0,f=new tinymce.dom.ScriptLoader,g="data-scayt-word",h="scayt-misspell-word",i={scayt_context_commands:"scayt_contextCommands",scayt_slang:"scayt_sLang",scayt_max_suggestion:"scayt_maxSuggestions",scayt_custom_dic_ids:"scayt_customDictionaryIds",scayt_user_dic_name:"scayt_userDictionaryName",scayt_ui_tabs:"scayt_uiTabs",scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_context_moresuggestions:"scayt_moreSuggestions",scayt_customer_id:"scayt_customerId",scayt_custom_url:"scayt_srcUrl",scayt_auto_startup:"scayt_autoStartup",scayt_context_menu_items_order:"scayt_contextMenuItemsOrder"},j=function(a){for(var b in a)b in i&&(a[i[b]]=a[b],delete a[b])},k=function(a,b){var i,c=document.location.protocol,e=a.getParam("scayt_srcUrl"),g=new Date,h=g.getTime();c=c.search(/https?:/)!==-1?c:"http:",e=0===e.search(/^\/\//)?c+e:e,i=e+"?"+h,"undefined"==typeof window.SCAYT||"function"!=typeof window.SCAYT.TINYMCE?(d[a.id]=b,d.loadOrder.push(a.id),f.add(i),f.loadQueue(function(a){for(var b,c=0;c<d.loadOrder.length;c++)b=d.loadOrder[c],tinymce.plugins.SCAYT.fireOnce(tinymce,"onScaytReady"),"function"==typeof d[b]&&d[b](tinymce.editors[b]),delete d[b];d.loadOrder=[]})):window.SCAYT&&"function"==typeof window.SCAYT.TINYMCE&&(tinymce.plugins.SCAYT.fireOnce(tinymce,"onScaytReady"),tinymce.plugins.SCAYT.getScayt(tinymce.editors[a.id])||"function"==typeof b&&b(a))},l=function(a){k(a,function(d){var e={debug:d.getParam("scayt_debug",!1),lang:d.getParam("scayt_sLang"),container:d.getContentAreaContainer()&&d.getContentAreaContainer().children[0]?d.getContentAreaContainer().children[0]:d.getElement(),customDictionary:d.getParam("scayt_customDictionaryIds"),userDictionaryName:d.getParam("scayt_userDictionaryName"),localization:d.langCode,customer_id:d.getParam("scayt_customerId"),data_attribute_name:g,misspelled_word_class:h,ignoreElementsRegex:d.getParam("scayt_elementsToIgnore"),minWordLength:d.getParam("scayt_minWordLength")};tinymce.focusedEditor===a&&(e.focused=!0),d.getParam("scayt_serviceProtocol")&&(e.service_protocol=d.getParam("scayt_serviceProtocol")),d.getParam("scayt_serviceHost")&&(e.service_host=d.getParam("scayt_serviceHost")),d.getParam("scayt_servicePort")&&(e.service_port=d.getParam("scayt_servicePort")),d.getParam("scayt_servicePath")&&(e.service_path=d.getParam("scayt_servicePath"));var f=new SCAYT.TINYMCE(e,function(){},function(){}),i="word_";f.subscribe("suggestionListSend",function(a){for(var b={},d=[],e=0;e<a.suggestionList.length;e++)b[i+a.suggestionList[e]]||(b[i+a.suggestionList[e]]=a.suggestionList[e],d.push(a.suggestionList[e]));c=d}),b[d.id]=f})},m=function(a){var c=b[a.id];c&&c.destroy(),delete b[a.id]},n=function(a){a&&(a.reloadMarkup?a.reloadMarkup():(e<5&&(console.warn("Note: You are using latest version of SCAYT plug-in. It is recommended to upgrade WebSpellChecker.net application to version v4.8.3.Contact us by e-mail at support@webspellchecker.net."),e+=1),a.fire("startSpellCheck")))};return{reloadMarkup:function(a){return n(a)},create:function(a){return l(a)},destroy:function(a){return m(a)},getScayt:function(a){return b[a.id]||!1},getSuggestions:function(){return c},getState:function(b){var c="object"==typeof b?b.id:b;return a[c]},setState:function(b,c){var d="object"==typeof b?b.id:b;return c=c||!1,a[d]=c},getOptions:function(a){var b=this.getScayt(a);return b.getApplicationConfig()},getCurrentLanguage:function(a){var b=this.getScayt(a);return b.getLang()},getLanguages:function(a){var b=this.getScayt(a);return b.getLangList()},getUserDictionaryName:function(a){var b=this.getScayt(a);return b.getUserDictionaryName()},getVersion:function(a){var b=this.getScayt(a);return b.getVersion()},removeMarkupFromString:function(a,b){var c=this.getScayt(a);return c?c.removeMarkupFromString(b):b},replaceOldOptionsNames:function(a){j(a)},fireOnce:function(a,b){a["uniqueEvtKey_"+b]||(a["uniqueEvtKey_"+b]=!0,a.fire(b))},executeOnce:function(a,b,c){var d=function(){a.off(b,d),"function"==typeof c&&c()};a.on(b,d)},misspelledWordClass:function(){return h}()}}(),tinymce.PluginManager.add("scayt",function(a,b){"use strict";a.settings.contextmenu=a.settings.contextmenu||"scayt link image inserttable | cell row column deletetable";var c={definitionDefaultOption:{scayt_srcUrl:{type:"string",default:"//svc.webspellchecker.net/spellcheck31/lf/scayt3/tinymce/tinymcescayt.js"},scayt_sLang:{type:"string",default:"en_US"},scayt_customerId:{type:"string",default:"1:wiN6M-YQYOz2-PTPoa2-3yaA92-PmWom-3CEx53-jHqwR3-NYK6b-XR5Uh1-M7YAp4"},scayt_autoStartup:{type:"boolean",default:!1},scayt_maxSuggestions:{type:"number",default:5},scayt_minWordLength:{type:"number",default:4},scayt_moreSuggestions:{type:"string",default:"on",allowable:{on:!0,off:!0}},scayt_contextCommands:{type:"string",default:"ignoreall,add"},scayt_contextMenuItemsOrder:{type:"string",default:"suggest|moresuggest|control"},scayt_uiTabs:{type:"string",default:"1,1,1"},scayt_customDictionaryIds:{type:"string",default:""},scayt_userDictionaryName:{type:"string",default:null},scayt_serviceProtocol:{type:"string",default:null},scayt_serviceHost:{type:"string",default:null},scayt_servicePort:{type:"string",default:null},scayt_servicePath:{type:"string",default:null}},parseOptions:function(a){var b=this,c=b.definitionDefaultOption,d=a.settings,e=tinymce.plugins.SCAYT,g=f.getParameter,h=f.isAllowable;d.scayt_autoStartup=g("scayt_autoStartup"),d.scayt_moreSuggestions=h("scayt_moreSuggestions")?g("scayt_moreSuggestions"):"off",d.scayt_maxSuggestions=f.isNegative(g("scayt_maxSuggestions"))?c.scayt_maxSuggestions.default:g("scayt_maxSuggestions"),d.scayt_minWordLength=g("scayt_minWordLength")<1?c.scayt_minWordLength.default:g("scayt_minWordLength"),d.scayt_srcUrl=g("scayt_srcUrl"),d.scayt_sLang=g("scayt_sLang"),d.scayt_customerId=function(a,b){b=f.getLocationInfo(b);var d=f.getLocationInfo(c.scayt_srcUrl.default),e=a&&typeof a===c.scayt_customerId.type&&a.length>=50;return d=b.host===d.host&&b.pathname===d.pathname,e&&!d?a:d?e&&d?a:c.scayt_customerId.default:a}(a.getParam("scayt_customerId"),d.scayt_srcUrl),d.scayt_customDictionaryIds=g("scayt_customDictionaryIds"),d.scayt_userDictionaryName=g("scayt_userDictionaryName"),d.scayt_serviceProtocol=g("scayt_serviceProtocol"),d.scayt_serviceHost=g("scayt_serviceHost"),d.scayt_servicePort=g("scayt_servicePort"),d.scayt_servicePath=g("scayt_servicePath"),d.scayt_contextCommands=g("scayt_contextCommands"),"all"===d.scayt_contextCommands?d.scayt_contextCommands=c.scayt_contextCommands.default:"off"===d.scayt_contextCommands?d.scayt_contextCommands="":d.scayt_contextCommands=d.scayt_contextCommands.replace(/\s?[\|]+/gi," "),d.scayt_contextMenuItemsOrder=g("scayt_contextMenuItemsOrder"),d.scayt_contextMenuItemsOrder=d.scayt_contextMenuItemsOrder.replace(/\s?[\|]+/g," "),d.scayt_uiTabs=g("scayt_uiTabs").split(","),3==d.scayt_uiTabs.length&&f.validateArray(d.scayt_uiTabs,function(a){return 0==a||1==a})||(d.scayt_uiTabs=c.scayt_uiTabs.default.split(",")),e.setState(a,d.scayt_autoStartup)},init:function(a){var b=a;tinymce.plugins.SCAYT.replaceOldOptionsNames(a.settings),this.parseOptions(b),this.bindEvents(b)},bindEvents:function(a){var c=a,f=tinymce.plugins.SCAYT,h=(a.plugins.scayt,a.inline),i=function(a){var b=d.scaytButton;a.settings.readonly?b&&b.disabled(!0):f.getState(a)===!0&&(f.create(a),b&&b.active(!0),e.create(a))};h?c.on("focusin",function(a){var b=d.scaytButton;b&&b.disabled(!0)}):c.on("init",function(a){var b=a.target;i(b)}),c.on("remove",function(){return f.destroy(c)}),c.on("SetContent",function(a){var b=f.getScayt(c);b&&f.getState(c)&&(a.content&&(a.content=f.removeMarkupFromString(c,a.content)),f.reloadMarkup(b))}),c.on("GetContent",function(a){f.getScayt(c);a.preventDefault(),f.getState(c)&&a.content&&(a.content=f.removeMarkupFromString(c,a.content))}),c.on("PastePreProcess",function(a){var b=f.getScayt(c);f.getState(c)&&(a.content=f.removeMarkupFromString(c,a.content),setTimeout(function(){b.removeMarkupInSelectionNode(),f.reloadMarkup(b)},0))}),c.on("NodeChange",function(a){var b=[],c=tinymce.plugins.SCAYT.misspelledWordClass;a.element&&"SPAN"==a.element.nodeName&&a.element.className==c&&(tinymce.each(a.parents,function(a){"SPAN"==a.nodeName&&a.className==c||b.push(a)}),a.element=a.element.parentNode,a.parents=b)}),a.on("BeforeAddUndo",function(b){b.lastLevel&&b.lastLevel.content&&(b.lastLevel.content=f.removeMarkupFromString(a,b.lastLevel.content)),b.level.content=f.removeMarkupFromString(a,b.level.content)}),a.on("BeforeExecCommand",function(b){var c=f.getScayt(a),d=!1,e=!0;"Cut"!==b.command&&"Bold"!==b.command&&"Underline"!==b.command&&"Italic"!==b.command&&"Subscript"!==b.command&&"Superscript"!==b.command&&"mceToggleFormat"!==b.command||c&&("Cut"===b.command&&(e=!1,d=!0),c.removeMarkupInSelectionNode({removeInside:e,forceBookmark:d}),setTimeout(function(){f.reloadMarkup(c)},0))})}},d={scaytButton:null,createToolBarButton:function(a){var b=this;a.addButton("scayt",{type:"splitbutton",role:"splitbutton",tooltip:"SpellCheckAsYouType",disabled:!1,menu:b.renderItemMenu(a),icon:"spellchecker",onpostrender:function(){b.scaytButton=this},onshow:function(a){b.findOutStatusMenu(a.control,this)},onclick:function(c){b.toggleStateMenuSelect(a)}})},renderItemMenu:function(a){var b=[],c=tinymce.each,d=a,e=d.settings,f=e.scayt_uiTabs;return c(g.menu,function(a,c){a.identification&&parseInt(f[c])?(a.menuItemIndex=b.length,b.push(a)):"about"==a.identification&&(a.menuItemIndex=0===b.length?0:b.length,b.push(a))}),b},toggleStateMenuSelect:function(a){var b=tinymce.plugins.SCAYT,c=b.setState(a,!b.getState(a)),d=this.scaytButton,f=this.scaytButton.menu;c?(b.create(a),d.active(!0),e.create(a)):(b.destroy(a),d.active(!1),e.destroy(a)),this.findOutStatusMenu(f,d)},findOutStatusMenu:function(a,b){var c=a?a._items:{},d=!b.active();return tinymce.each(c,function(a){a.disabled(d)}),!d},init:function(a){tinymce.plugins.SCAYT;c.init(a),this.createToolBarButton(a)}},e={originalMenu:void 0,contextmenu:null,menu:null,items:[],pos:null,createScaytMenuItem:function(){a.addMenuItem("scayt",{context:"scayt3t",text:"SCAYT",onPostRender:function(){this.visible(!1),e.originalMenu=this._parent}})},destroy:function(a){var b=this;null!=b.menu&&b.menu.remove(),b.menu=null},create:function(a){var l,m,n,o,b=this,c=tinymce.plugins.SCAYT,d=a,g=d.settings,i=null,j=null,k=null,p=g.scayt_maxSuggestions;d.on("contextmenu",function(h){if(h.preventDefault(),!a.settings.readonly&&(i=c.getScayt(d),j=f.getSelectionWord(i))){i.fire("getSuggestionsList",{lang:c.getCurrentLanguage(d),word:j}),l=c.getSuggestions(),m=l.slice(0,p),n=l.slice(p,15),o="on"===g.scayt_moreSuggestions&&n.length>0&&"no_any_suggestions"!=n[0],f.generateMenuItemsForSuggestion(m),f.generateMoreSuggestionsItem(n),f.registerControlItems();var q=g.scayt_contextCommands+" | aboutscayt |",r=(m.length>0?m.join(" "):o||l.length>0?"":"no_any_suggestions")+" | ",s=o?" moreSuggestions | ":"";b.contextmenu=g.scayt_contextMenuItemsOrder.replace("control",q).replace("moresuggest",s).replace("suggest",r),b.contextmenu=a.settings.contextmenu.replace("scayt",b.contextmenu),b.items=[],tinymce.each(b.contextmenu.split(/[ ,]/),function(a){var c=d.menuItems[a];"|"==a&&(c={text:a}),c&&(c.shortcut="",b.items.push(c))});for(var t=0;t<b.items.length;t++)"|"==b.items[t].text&&(0!==t&&t!=b.items.length-1||b.items.splice(t,1));b.menu=new tinymce.ui.Menu({items:b.items,context:"scayt",onCancel:function(){b.menu&&(b.menu.hide(),b.menu=null)}}),e.originalMenu.hide(),b.menu.renderTo(document.body);var u=b.menu.getEl();return tinymce.isIE?(u.style.height="auto",window.JSON&&(u.style.maxHeight="inherit",u.style.overflow="inherit")):(u.style.maxHeight="inherit",u.style.position="absolute",u.style.overflow="visible"),k="#"+b.menu._id,i.showBanner(k),b.menu.show(),b.pos={x:h.pageX,y:h.pageY},d.inline||(b.pos=tinymce.DOM.getPos(d.getContentAreaContainer()),b.pos.x+=h.clientX,b.pos.y+=h.clientY),b.menu.moveTo(b.pos.x,b.pos.y),b.menu.on("cancel",function(){this.remove(),this.menu=null}),!1}})}},f={getKeys:Object.keys||function(a){var c,b=[];for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},getLocationInfo:function(a){var b=document.createElement("a");return b.href=a,{protocol:b.protocol.replace(/:/,""),host:b.host.split(":")[0],port:"0"==b.port?"80":b.port,pathname:b.pathname.replace(/^\//,"")}},isInteger:function(a){return(0^a)===a},validateArray:function(a,b){for(var c=!0,d=0,e=a.length;d<e&&(c=c&&b(a[d]),c);d++);return c},isNegative:function(a){return a<0},getParameter:function(b){var d=c.definitionDefaultOption;if(b+="",!d[b])return a.getParam(b);var e=function(b){return typeof a.getParam(b)===d[b].type};return e(b)?a.getParam(b):d[b].default},isAllowable:function(a){var b=c.definitionDefaultOption;return f.getParameter(a)in b[a].allowable},getLang:function(b,c){return a.editorManager.i18n.translate(b)!==b?a.editorManager.i18n.translate(b):c||b},getTranslate:function(b){return a.editorManager.i18n.translate(b)},getSelectionWord:function(a){var b,c=!1;return a&&(b=a.getSelectionNode(),c=b?b.getAttribute(a.getNodeAttribute()):b),c},registerMenuItem:function(b,c){a.addMenuItem(b,c)},addUndoLevelAfterReplaceCommand:function(a){var c=a.undoManager;c.add()},generateReplaceCommand:function(b,c){var d=c,e=this;return function(){a.focus(),b.replaceSelectionNode({word:d}),e.addUndoLevelAfterReplaceCommand(a)}},generateMenuItemsForSuggestion:function(b){var c=tinymce.plugins.SCAYT.getScayt(a);if(0===b.length||"no_any_suggestions"===b[0])this.registerMenuItem("no_any_suggestions",{text:f.getLang("no_any_suggestions","No suggestions"),onclick:function(){return!1}});else for(var d=0;d<b.length;d++)this.registerMenuItem(b[d],{text:b[d],onclick:this.generateReplaceCommand(c,b[d])})},generateSubMenuForMoreSuggestions:function(b){for(var c=tinymce.plugins.SCAYT.getScayt(a),d=[],e=0;e<b.length;e++)d.push({text:b[e],onclick:this.generateReplaceCommand(c,b[e])});return d},generateMoreSuggestionsItem:function(b){var d,e,c=this;d=c.generateSubMenuForMoreSuggestions(b),d[0]&&d[0].text&&(e="no_any_suggestions"==d[0].text?null:d),null!=e&&a.addMenuItem("moreSuggestions",{text:f.getLang("cm_more_suggestions","More suggestions"),menu:e})},registerControlItems:function(){a.addMenuItem("ignore",{text:f.getLang("cm_ignore_word","Ignore"),onclick:function(){var b=tinymce.plugins.SCAYT.getScayt(a);a.focus(),setTimeout(function(){b.ignoreWord()},0)}}),a.addMenuItem("ignoreall",{text:f.getLang("cm_ignore_all","Ignore all"),onclick:function(){var b=tinymce.plugins.SCAYT.getScayt(a);a.focus(),setTimeout(function(){b.ignoreAllWords()},0)}}),a.addMenuItem("add",{text:f.getLang("cm_add_word","Add word"),onclick:function(){var b=tinymce.plugins.SCAYT.getScayt(a);a.focus(),setTimeout(function(){b.addWordToUserDictionary()},0)}}),a.addMenuItem("aboutscayt",{text:f.getLang("cm_about","About SCAYT"),onclick:function(b){var c=a.settings.scayt_uiTabs,d=c.length;tinymce.each(c,function(a){0==parseInt(a)&&d--}),g.openDialog(a,b,d)}}),a.addMenuItem("no_any_suggestions",{text:f.getLang("no_any_suggestions","No suggestions"),onPostRender:function(a){a.control.disabled(!0)},onclick:function(){}})},registerLanguages:function(){var c,d,e,a={},b={};return c=function(a){var c="string"==typeof a?a:'"'+a+'"';if(b.hasOwnProperty(c))return b[c]},d=function(a){var c="string"==typeof a?a:'"'+a+'"';for(var d in b)if(b[d]==c)return d},e=function(c){a=c;for(var d in a)if(a.hasOwnProperty(d))for(var e in a[d])b[e]=a[d][e];return b},{getToName:c,getToCode:d,makeLanguageList:e}}(),replaceHostNullToNativeNull:function(a){if(document.all&&document.querySelector&&!document.addEventListener)for(var b in a)a[b]=null===a[b]?null:a[b]}},g={dictionaryButtons:[],definitionDataControl:{nodes:{},setInstances:function(a,b){return this.nodes[b]=a},getInstances:function(a){return this.nodes[a]}},langState:{isChanged:function(){return null!==this.selectLang&&this.currentLang!==this.selectLang},currentLang:null,selectLang:null,id:"lang"},getChangedOptions:function(){var a=this,b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return g.langState.isChanged()&&(b[g.langState.id]=g.langState.selectLang),b},menu:[{text:f.getLang("tb_menu_options","SCAYT Options"),identification:"options",menuItemIndex:0,onclick:function(b){f.replaceHostNullToNativeNull(b),g.openDialog(a,b,this.settings.menuItemIndex)}},{text:f.getLang("tb_menu_languages","SCAYT Languages"),identification:"languages",menuItemIndex:1,onclick:function(b){f.replaceHostNullToNativeNull(b),g.openDialog(a,b,this.settings.menuItemIndex)}},{text:f.getLang("tb_menu_dictionaries","SCAYT Dictionaries"),identification:"dictionary",menuItemIndex:2,onclick:function(b){f.replaceHostNullToNativeNull(b),g.openDialog(a,b,this.settings.menuItemIndex)}},{text:f.getLang("tb_menu_about","About SCAYT"),identification:"about",menuItemIndex:3,onclick:function(b){f.replaceHostNullToNativeNull(b),g.openDialog(a,b,this.settings.menuItemIndex)}}],generateOptionsCheckbox:function(a){var b,c=a||{};b=[{checked:!1,name:"ignore-all-caps-words",text:f.getLang("label_allCaps","Ignore All-Caps Words")},{checked:!1,name:"ignore-domain-names",text:f.getLang("label_ignoreDomainNames","Ignore Domain Names")},{checked:!1,name:"ignore-words-with-mixed-cases",text:f.getLang("label_mixedCase","Ignore Mixed-Case Words")},{checked:!1,name:"ignore-words-with-numbers",text:f.getLang("label_mixedWithDigits","Ignore Words with Numbers")}];for(var d=0;d<b.length;d++)b[d].checked=c[b[d].name];return b},generateLanguagesCheckbox:function(a,b){var c=[],e=a||{},g=b||"en_US",h=[],i={},j=f.getKeys;this.langState.currentLang=g,e=f.registerLanguages.makeLanguageList(e);for(var k in e)e.hasOwnProperty(k)&&"string"==typeof e[k]&&""!=e[k]&&(i[e[k]]=k);h=j(i).sort(),e={};for(var l=0;l<h.length;l+=1)e[h[l]]=i[h[l]];for(var m in e)c.push({checked:e[m]===g,name:e[m],role:e[m],text:m});return c},dividedLanguagesCheckbox:function(a){var b=[[],[]],c=f.getKeys,d=c(a),e=d.length,g=0,h=0;for(var i in a)a.hasOwnProperty(i)&&(h=parseInt(i),g=h<Math.ceil(e/2)?0:1,b[g].push(a[i]));return b},generateDictionaryButtons:function(){var a=[{disabled:!0,name:"Create",role:"Create",text:f.getLang("dic_create","Create")},{disabled:!0,name:"Restore",role:"Restore",text:f.getLang("dic_restore","Restore")},{disabled:!0,name:"Rename",role:"Rename",text:f.getLang("dic_rename","Rename")},{disabled:!0,name:"Remove",role:"Remove",text:f.getLang("dic_remove","Remove")}];return a},setDictionaryButtons:function(){var a=this;a.removeDictionaryButtons(),a.definitionDataControl.getInstances("dic_buttons").append(a.getDictionaryButtons())},getDictionaryButtons:function(){var a=this;return a.dictionaryButtons},removeDictionaryButtons:function(){for(var a=this,b=a.definitionDataControl.getInstances("dic_buttons").items(),c=b.length-1;c>=0;c--)b[c].remove()},toggleDictionaryButtons:function(a){for(var b=this,c=b.generateDictionaryButtons(),d=a.split("|")||"",e=0;e<d.length;e++)for(var f=0;f<c.length;f++)c[f].name==d[e]&&(c[f].disabled=!1);b.dictionaryButtons=c},initDictionaryNameAndButtons:function(a){var b=this,c="",d=["Create|Restore","Rename|Remove"];return void 0!==a&&"null"!==a&&""!==a?(c=a,b.toggleDictionaryButtons(d[1])):(c="",b.toggleDictionaryButtons(d[0])),c},handlerDictionaryButtons:function(a){var b=this;if(a&&"BUTTON"===a.target.tagName&&a.control.disabled()!==!0){var c=a.control.aria("role").toLowerCase();b.manageCommandButtons[c]()}},dicEmptyMessage:function(){return!document.getElementById("messageBox").innerHTML},dicSuccessMessage:function(a){return a&&(document.getElementById("messageBox").style.color="green",document.getElementById("messageBox").innerHTML=a),""},dicErrorMessage:function(a){return a&&(document.getElementById("messageBox").style.color="red",document.getElementById("messageBox").innerHTML=a),""},removeMessage:function(){var a=this;a.dicEmptyMessage()},manageCommandButtons:{create:function(){var c=tinymce.plugins.SCAYT,d=c.getScayt(a),e=f.getLang("dic_err_dic_create","The Dictionary %s cannot be created"),h=f.getLang("dic_succ_dic_create","The Dictionary %s has been successfully created");d.createUserDictionary(g.getDictionaryName(),function(a){g.initDictionaryNameAndButtons(a.name),a.error?(g.setDictionaryButtons(),e=e.replace("%s",'"'+g.getDictionaryName()+'"'),g.dicErrorMessage(e)):(g.setDictionaryButtons(),h=h.replace("%s",'"'+g.getDictionaryName()+'"'),g.dicSuccessMessage(h))},function(a){e=e.replace("%s",'"'+g.getDictionaryName()+'"'),g.dicErrorMessage(e)})},restore:function(){var c=tinymce.plugins.SCAYT,d=c.getScayt(a),e=f.getLang("dic_err_dic_restore","The Dictionary %s cannot be restored"),h=f.getLang("dic_succ_dic_restore","The Dictionary %s has been successfully restored");d.restoreUserDictionary(g.getDictionaryName(),function(a){g.initDictionaryNameAndButtons(a.name),a.error?(g.setDictionaryButtons(),e=e.replace("%s",'"'+g.getDictionaryName()+'"'),g.dicErrorMessage(e)):(g.setDictionaryButtons(),h=h.replace("%s",'"'+g.getDictionaryName()+'"'),g.dicSuccessMessage(h))},function(a){e=e.replace("%s",'"'+g.getDictionaryName()+'"'),g.dicErrorMessage(e)})},rename:function(){var c=tinymce.plugins.SCAYT,d=c.getScayt(a),e=f.getLang("dic_err_dic_rename","The Dictionary %s cannot be renamed"),h=f.getLang("dic_succ_dic_rename","The Dictionary %s has been successfully renamed");d.renameUserDictionary(g.getDictionaryName(),function(a){g.initDictionaryNameAndButtons(a.name),a.error?(e=e.replace("%s",'"'+g.getDictionaryName()+'"'),g.dicErrorMessage(e)):(g.setDictionaryButtons(),h=h.replace("%s",'"'+g.getDictionaryName()+'"'),g.setDictionaryName(g.getDictionaryName()),g.dicSuccessMessage(h))},function(a){e=e.replace("%s",'"'+g.getDictionaryName()+'"'),g.setDictionaryName(g.getDictionaryName()),g.dicErrorMessage(e)})},remove:function(){var c=tinymce.plugins.SCAYT,d=c.getScayt(a),e=f.getLang("dic_err_dic_remove","The Dictionary %s cannot be removed"),h=f.getLang("dic_succ_dic_remove","The Dictionary %s has been successfully removed");d.removeUserDictionary(g.getDictionaryName(),function(a){g.resetDictionaryName(),g.initDictionaryNameAndButtons(g.getDictionaryName()),a.error?(e=e.replace("%s",'"'+a.name+'"'),g.dicErrorMessage(e)):(g.setDictionaryButtons(),h=h.replace("%s",'"'+a.name+'"'),g.dicSuccessMessage(h))},function(a){e=e.replace("%s",'"'+g.getDictionaryName()+'"'),g.dicErrorMessage(e)})}},getDictionaryName:function(){var a=this;return a.definitionDataControl.getInstances("dic_textarea").value()},setDictionaryName:function(a){var b=this;return a=a||"",b.initDictionaryNameAndButtons(a)},resetDictionaryName:function(a){var b=this;return a=a||"",b.definitionDataControl.getInstances("dic_textarea").value(a)},definitionWindowDialog:function(a){var b=this,c=[],d=tinymce.each,e=null,h=a,i=tinymce.plugins.SCAYT,j=h.settings,k=j.scayt_uiTabs,l=g.generateLanguagesCheckbox(i.getLanguages(h),i.getCurrentLanguage(h)),m=g.dividedLanguagesCheckbox(l);return e=[{title:f.getLang("tab_options","Options"),type:"form",role:"scayt_options",identification:"options",minWidth:450,minHeight:300,defaults:{type:"checkbox",role:"checkbox",style:"overflow: hidden; cursor: pointer;"},items:g.generateOptionsCheckbox(i.getOptions(h))},{title:f.getLang("tab_languages","Languages"),type:"form",pack:"start",role:"scayt_language",identification:"language",items:[{type:"container",role:"container",layout:"grid",id:"langHolder",name:"langHolder",packV:"start",columns:2,spacing:10,alignH:["50%","50%"],items:[{type:"container",id:"leftCol",name:"leftCol",layout:"grid",role:"container",columns:1,spacing:10,defaults:{type:"radio",role:"radio",label:" ",style:"overflow: hidden; cursor: pointer;"},items:m[0]},{type:"container",id:"rightCol",name:"rightCol",layout:"grid",role:"container",columns:1,spacing:10,defaults:{type:"radio",role:"radio",label:" ",style:"overflow: hidden; cursor: pointer;"},items:m[1]}],onClick:function(a){var c,d,e,f,h,i,b=a.control;if(a&&"container"!=b.aria("role")){c=b.parents("#langHolder")[0],h=c.find("#leftCol")[0],i=c.find("#rightCol")[0],d=h.toJSON(),e=i.toJSON(),f=tinymce.extend(d,e);for(var j in f)f[j]=!1;f[b.aria("role")]=!0,g.langState.selectLang=b.aria("role"),h.fromJSON(f),i.fromJSON(f)}}}]},{title:f.getLang("tab_dictionaries","User dictionaries"),type:"form",pack:"start",role:"scayt_dictionary",identification:"dictionary",items:[{label:f.getLang("dic_dictionary_name","Dictionary Name"),type:"textbox",role:"dic_textbox",value:g.setDictionaryName(i.getUserDictionaryName(h)),onPostRender:function(a){g.definitionDataControl.setInstances(a.control,"dic_textarea")}},{type:"container",role:"container",defaults:{type:"button",role:"button",style:"margin-right: 6px; z-index:2;"},items:g.getDictionaryButtons(),onPostRender:function(a){g.definitionDataControl.setInstances(a.control,"dic_buttons")},onClick:function(a){g.handlerDictionaryButtons(a)}},{type:"fieldset",role:"fieldset",style:"border: none;padding-top: 20px;",html:'<div id="infoBlock" style="white-space: normal;text-align: justify;"><div id="messageBox"></div>'+f.getLang("dic_about_info","Initially a User Dictionary is stored in a cookie. However, cookies are limited in size. When a User Dictionary grows to a point where it cannot be stored in a cookie, the dictionary may be stored on our server. To store your personal dictionary on our server, you should specify a name for it. If you already have a stored dictionary, please type its name and click the Restore button.")+"</div>"}]},{title:f.getLang("tab_about","About SCAYT"),type:"form",role:"scayt_about",identification:"about",items:[{type:"container",role:"container",style:"padding: 10px; min-width: 300px;",html:'<div style="white-space: normal;">'+b.aboutTemplate()+"</div>"}]}],d(e,function(a,b){a.identification&&parseInt(k[b])?c.push(a):"about"==a.identification&&c.push(a)}),c},openDialog:function(b,c,d){var e=this,h=d||0;return b.windowManager.open({title:f.getLang("title","SpellCheckAsYouType"),data:c,minWidth:450,minHeight:300,resizable:"true",role:"tabpanel",bodyType:"tabpanel",onPostRender:function(a){for(var b=this,c=this._id+"-head",d=document.getElementById(c),e=d.getElementsByTagName("DIV"),f=e.length-1;f>=0;f--)"mce-title"==e[f].className&&(e[f].style.fontSize="15px");b.items()[0].activateTab(h),b.focus()},onSubmit:function(b){var c=tinymce.plugins.SCAYT.getScayt(a),d=g.getChangedOptions.call(b.data);c.commitOption({changedOptions:d})},body:e.definitionWindowDialog(a)})},aboutTemplate:function(){var b=tinymce.plugins.SCAYT,c=b.getScayt(a);return'<div id="scayt_about" style="padding: 15px;"><img title="logo" alt="logo" src="'+c.getLogo(a)+'" style="padding-bottom: 15px;" /><br />'+c.getLocal("version")+b.getVersion(a)+" <br /><br /> "+c.getLocal("about_throw_copy")+"</div>"}};d.init(a),e.createScaytMenuItem()}),tinymce.on("onScaytReady",function(a){tinymce.EditorManager.Editor.prototype.isDirty=function(){var b,c,a=tinymce.plugins.SCAYT.getScayt(this);return a?(b=tinymce.trim(a.removeMarkupFromString(this.startContent)),c=tinymce.trim(a.removeMarkupFromString(this.getContent({format:"raw",no_events:1})))):(b=tinymce.trim(this.startContent),c=tinymce.trim(this.getContent({format:"raw",no_events:1}))),c!=b&&!this.isNotDirty}})}();